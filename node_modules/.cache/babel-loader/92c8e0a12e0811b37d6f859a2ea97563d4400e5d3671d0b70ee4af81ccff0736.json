{"ast":null,"code":"import _objectSpread from\"E:/project/property-react-project/fronted/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// frontend/src/components/AddPropertyForm.js\nimport React,{useEffect,useState}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const empty={id:null,name:\"\",type:\"Apartment\",price:\"\",location:\"\",description:\"\",image:\"\",coords:{lat:null,lng:null}};export default function AddPropertyForm(_ref){let{onAdd,editing,onUpdate}=_ref;const[form,setForm]=useState(empty);const[submitting,setSubmitting]=useState(false);useEffect(()=>{if(editing){// backend uses _id; ensure id present for update\nsetForm({id:editing._id||editing.id||null,name:editing.name||\"\",type:editing.type||\"Apartment\",price:editing.price||\"\",location:editing.location||\"\",description:editing.description||\"\",image:editing.image||\"\",coords:editing.coords||{lat:null,lng:null}});}else{setForm(empty);}},[editing]);const handleChange=e=>setForm(f=>_objectSpread(_objectSpread({},f),{},{[e.target.name]:e.target.value}));const submit=async e=>{e.preventDefault();if(!form.name||!form.location||form.price===\"\"){alert(\"Please provide name, location and price.\");return;}const payload={name:form.name,type:form.type,price:Number(form.price),location:form.location,description:form.description,image:form.image,coords:form.coords};setSubmitting(true);try{if(editing){await onUpdate(_objectSpread(_objectSpread({},payload),{},{id:form.id,_id:form.id}));}else{await onAdd(payload);}setForm(empty);}catch(err){console.error(err);alert(\"Failed to \".concat(editing?\"update\":\"add\",\" property.\"));}finally{setSubmitting(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:editing?\"Edit Property\":\"Add Property\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:submit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{name:\"name\",value:form.name,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Type\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"type\",value:form.type,onChange:handleChange,children:[/*#__PURE__*/_jsx(\"option\",{children:\"Apartment\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Villa\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Commercial\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Plot\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Price (INR)\"}),/*#__PURE__*/_jsx(\"input\",{name:\"price\",value:form.price,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Location\"}),/*#__PURE__*/_jsx(\"input\",{name:\"location\",value:form.location,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Image URL (optional)\"}),/*#__PURE__*/_jsx(\"input\",{name:\"image\",value:form.image,onChange:handleChange,placeholder:\"https://...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",value:form.description,onChange:handleChange,rows:\"4\"})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn-primary\",type:\"submit\",disabled:submitting,children:submitting?editing?\"Updating...\":\"Adding...\":editing?\"Update Property\":\"Add Property\"})})]})]});}","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","empty","id","name","type","price","location","description","image","coords","lat","lng","AddPropertyForm","_ref","onAdd","editing","onUpdate","form","setForm","submitting","setSubmitting","_id","handleChange","e","f","_objectSpread","target","value","submit","preventDefault","alert","payload","Number","err","console","error","concat","className","children","onSubmit","onChange","placeholder","rows","disabled"],"sources":["E:/project/property-react-project/fronted/src/components/AddPropertyForm.js"],"sourcesContent":["// frontend/src/components/AddPropertyForm.js\nimport React, { useEffect, useState } from \"react\";\n\nconst empty = { id: null, name: \"\", type: \"Apartment\", price: \"\", location: \"\", description: \"\", image: \"\", coords: { lat: null, lng: null } };\n\nexport default function AddPropertyForm({ onAdd, editing, onUpdate }) {\n  const [form, setForm] = useState(empty);\n  const [submitting, setSubmitting] = useState(false);\n\n  useEffect(() => {\n    if (editing) {\n      // backend uses _id; ensure id present for update\n      setForm({\n        id: editing._id || editing.id || null,\n        name: editing.name || \"\",\n        type: editing.type || \"Apartment\",\n        price: editing.price || \"\",\n        location: editing.location || \"\",\n        description: editing.description || \"\",\n        image: editing.image || \"\",\n        coords: editing.coords || { lat: null, lng: null }\n      });\n    } else {\n      setForm(empty);\n    }\n  }, [editing]);\n\n  const handleChange = (e) => setForm(f => ({ ...f, [e.target.name]: e.target.value }));\n\n  const submit = async (e) => {\n    e.preventDefault();\n    if (!form.name || !form.location || form.price === \"\") {\n      alert(\"Please provide name, location and price.\");\n      return;\n    }\n\n    const payload = {\n      name: form.name,\n      type: form.type,\n      price: Number(form.price),\n      location: form.location,\n      description: form.description,\n      image: form.image,\n      coords: form.coords\n    };\n\n    setSubmitting(true);\n    try {\n      if (editing) {\n        await onUpdate({ ...payload, id: form.id, _id: form.id });\n      } else {\n        await onAdd(payload);\n      }\n      setForm(empty);\n    } catch (err) {\n      console.error(err);\n      alert(`Failed to ${editing ? \"update\" : \"add\"} property.`);\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  return (\n    <div className=\"card\">\n      <h3>{editing ? \"Edit Property\" : \"Add Property\"}</h3>\n      <form onSubmit={submit}>\n        <div className=\"field\">\n          <label>Name</label>\n          <input name=\"name\" value={form.name} onChange={handleChange} />\n        </div>\n\n        <div className=\"field\">\n          <label>Type</label>\n          <select name=\"type\" value={form.type} onChange={handleChange}>\n            <option>Apartment</option>\n            <option>Villa</option>\n            <option>Commercial</option>\n            <option>Plot</option>\n          </select>\n        </div>\n\n        <div className=\"field\">\n          <label>Price (INR)</label>\n          <input name=\"price\" value={form.price} onChange={handleChange} />\n        </div>\n\n        <div className=\"field\">\n          <label>Location</label>\n          <input name=\"location\" value={form.location} onChange={handleChange} />\n        </div>\n\n        <div className=\"field\">\n          <label>Image URL (optional)</label>\n          <input name=\"image\" value={form.image} onChange={handleChange} placeholder=\"https://...\" />\n        </div>\n\n        <div className=\"field\">\n          <label>Description</label>\n          <textarea name=\"description\" value={form.description} onChange={handleChange} rows=\"4\" />\n        </div>\n\n        <div>\n          <button className=\"btn-primary\" type=\"submit\" disabled={submitting}>\n            {submitting ? (editing ? \"Updating...\" : \"Adding...\") : (editing ? \"Update Property\" : \"Add Property\")}\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n}\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}